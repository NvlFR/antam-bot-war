<div
  class="container min-vh-100 d-flex flex-column justify-content-center py-4"
  style="margin-top: 100px"
>
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h1 class="text-center mb-3 h4 font-weight-bold">
        Daftar Antrian <br />
      </h1>
      <h2 class="text-center mb-3 h4 font-weight-bold">
        Butik Emas LM ANTAM - Bintaro
      </h2>
      <br />
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <form action="https://www.antributikbintaro.com" method="POST">
            <input
              type="hidden"
              name="_token"
              value="iPVOcfr5XCz7usoAjjweh6VGC1Oqy3j0PhZbcL7H"
            />
            <div class="form-group mb-3">
              <label for="name" class="form-label">Nama KTP</label>
              <input
                id="name"
                name="name"
                type="text"
                value=""
                required=""
                class="form-control"
                oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, '')"
              />
            </div>

            <div class="mb-3">
              <label for="ktp" class="form-label">Nomor KTP (16 digit)</label>
              <input
                type="text"
                class="form-control"
                id="ktp"
                name="ktp"
                value=""
                inputmode="numeric"
                maxlength="16"
                minlength="16"
                required=""
                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,16)"
              />
            </div>

            <div class="mb-3">
              <label for="phone_number" class="form-label">Nomor HP</label>
              <input
                type="text"
                class="form-control"
                id="phone_number"
                name="phone_number"
                value=""
                inputmode="numeric"
                pattern="[0-9]*"
                maxlength="12"
                required=""
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              />
            </div>
            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="check"
                name="check"
                value="1"
              />
              <label class="form-check-label" for="check">
                <p>
                  <strong>WAJIB </strong>menunjukkan KTP fisik asli yang sesuai
                  data pendaftaran dan jika KTP tidak sesuai atau tidak membawa
                  KTP fisik maka transaksi antrian BATAL
                </p>
                <p>&nbsp;</p>
                <p>
                  <strong
                    >Dan jika nomor antrian sudah terlewat maka akan menggunakan
                    nomor antrian baru.</strong
                  >
                </p>
              </label>
              <div id="error-check" class="text-danger mt-1 d-none">
                Klik kotak
              </div>
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="check_2"
                name="check_2"
                value="1"
              />
              <label class="form-check-label" for="check_2">
                <p>
                  <strong
                    >Transaksi pembelian per pelanggan maksimal sebulan
                    2X</strong
                  >
                </p>
                <p>&nbsp;</p>
                <p>
                  <strong
                    >Kode/nomor antrian yang diperoleh tidak memastikan
                    Ketersediaan Stok Masih Tersedia, karena Stok
                    Berjalan.</strong
                  >
                </p>
              </label>
              <div id="error-check2" class="text-danger mt-1 d-none">
                Klik kotak
              </div>
            </div>
            <div class="form-group mb-3">
              <label for="captcha_input" class="form-label"
                >Masukkan teks berikut:</label
              >
              <div class="d-flex align-items-center">
                <div
                  id="captcha-box"
                  class="px-3 py-2 bg-light border me-2"
                  style="letter-spacing: 5px; font-weight: bold"
                >
                  24IPNlUs
                </div>
                <button
                  type="button"
                  class="btn btn-outline-secondary btn-sm me-2"
                  onclick="reloadCaptcha()"
                >
                  <svg
                    class="svg-inline--fa fa-rotate"
                    aria-hidden="true"
                    focusable="false"
                    data-prefix="fas"
                    data-icon="rotate"
                    role="img"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512"
                    data-fa-i2svg=""
                  >
                    <path
                      fill="currentColor"
                      d="M142.9 142.9c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5c0 0 0 0 0 0H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5c7.7-21.8 20.2-42.3 37.8-59.8zM16 312v7.6 .7V440c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l41.6-41.6c87.6 86.5 228.7 86.2 315.8-1c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.2 62.2-162.7 62.5-225.3 1L185 329c6.9-6.9 8.9-17.2 5.2-26.2s-12.5-14.8-22.2-14.8H48.4h-.7H40c-13.3 0-24 10.7-24 24z"
                    ></path></svg
                  ><!-- <i class="fas fa-sync-alt"></i> Font Awesome fontawesome.com -->
                </button>
                <input
                  id="captcha_input"
                  name="captcha_input"
                  type="text"
                  required=""
                  class="form-control"
                  style="max-width: 150px"
                />
              </div>
            </div>

            <div class="form-group">
              <button
                type="submit"
                class="btn btn-primary w-100"
                style="background-color: #379777; border-color: #379777"
              >
                Daftar
              </button>
            </div>
          </form>
          <br />
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://www.google.com/recaptcha/api.js?render=6Lcnt-IrAAAAACaARn5oz_zj56mqFv_plVglvyaf"></script>

<style>
  input[type="checkbox"].form-check-input {
    width: 20px !important;
    height: 20px !important;
    border: 2px solid #000 !important;
    box-shadow: none !important;
  }

  input[type="checkbox"].form-check-input:checked {
    background-color: #379777 !important;
    border-color: #379777 !important;
  }

  .eye-btn {
    position: absolute;
    right: 10px;
    top: 38px;
    background: transparent;
    border: none;
  }

  .position-relative {
    position: relative;
  }

  input[type="password"] {
    font-family: "text-security-disc", sans-serif;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const check1 = document.getElementById("check");
    const check2 = document.getElementById("check_2");
    const errorCheck1 = document.getElementById("error-check");
    const errorCheck2 = document.getElementById("error-check2");

    form.addEventListener("submit", function (e) {
      let valid = true;

      // Reset tampilan error
      errorCheck1.classList.add("d-none");
      errorCheck2.classList.add("d-none");

      // Cek checkbox pertama
      if (!check1.checked) {
        errorCheck1.classList.remove("d-none");
        valid = false;
      }

      // Cek checkbox kedua
      if (!check2.checked) {
        errorCheck2.classList.remove("d-none");
        valid = false;
      }

      // Batalkan submit jika ada checkbox yang belum dicentang
      if (!valid) {
        e.preventDefault();
      }
    });
  });

  document.addEventListener("DOMContentLoaded", function () {
    // Validasi checkbox
    const form = document.querySelector("form");
    const check1 = document.getElementById("check");
    const check2 = document.getElementById("check_2");
    const errorCheck1 = document.getElementById("error-check");
    const errorCheck2 = document.getElementById("error-check2");

    form.addEventListener("submit", function (e) {
      let valid = true;
      errorCheck1.classList.add("d-none");
      errorCheck2.classList.add("d-none");
      if (!check1.checked) {
        errorCheck1.classList.remove("d-none");
        valid = false;
      }
      if (!check2.checked) {
        errorCheck2.classList.remove("d-none");
        valid = false;
      }
      if (!valid) e.preventDefault();
    });

    // Jika pendaftaran berhasil, munculkan modal
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
<script>
  // Toggle eye button
  function toggleEye(id) {
    const input = document.getElementById(id);
    const icon = document.getElementById("icon-" + id);
    if (input.type === "password") {
      input.type = "text";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    } else {
      input.type = "password";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    }
  }

  // Pastikan hanya abjad untuk nama KTP
  document.getElementById("name").addEventListener("input", function () {
    this.value = this.value.replace(/[^a-zA-Z\s]/g, "");
  });

  // Mask input realtime untuk KTP & WA
  function maskInput(inputId) {
    const input = document.getElementById(inputId);

    input.addEventListener("input", function () {
      const cleaned = this.value.replace(/\D/g, "");
      this.value = cleaned;
      this.dataset.raw = cleaned;
    });

    input.addEventListener("blur", function () {
      if (this.type === "password") {
        this.value = "*".repeat(this.dataset.raw?.length || 0);
      }
    });

    input.addEventListener("focus", function () {
      if (this.type === "password") {
        this.value = this.dataset.raw || "";
      }
    });
  }
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      grecaptcha.ready(function () {
        grecaptcha
          .execute("6Lcnt-IrAAAAACaARn5oz_zj56mqFv_plVglvyaf", {
            action: "submit",
          })
          .then(function (token) {
            // Tambahkan token ke form
            const recaptchaInput = document.createElement("input");
            recaptchaInput.setAttribute("type", "hidden");
            recaptchaInput.setAttribute("name", "g-recaptcha-response");
            recaptchaInput.setAttribute("value", token);
            form.appendChild(recaptchaInput);

            // Setelah token ditambahkan, kirim form
            form.submit();
          });
      });
    });
  });
</script>
<script>
  function reloadCaptcha() {
    fetch("/reload-captcha")
      .then((response) => response.json())
      .then((data) => {
        document.getElementById("captcha-box").textContent = data.captcha;
      })
      .catch((error) => {
        console.error("Captcha reload failed:", error);
      });
  }
</script>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BELM</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://www.antributikbintaro.com/assets/css/style.css"
    />
  </head>
  <body>
    <br /><br /><br />

    <nav class="navbar navbar-expand-lg fixed-top shadow-sm bg-white">
      <div class="container py-2">
        <a
          class="navbar-brand d-flex flex-column text-dark fw-semibold"
          href="/"
        >
          <span style="font-size: 16px">Butik Emas LM ANTAM - Bintaro</span>
          <small class="text-muted" style="font-size: 9px">
            Ruko Kebayoran Arcade 2 Blok B.28, Jl. Boulevard Bintaro Jaya No.
            Sektor 7,
            <br />Pd. Jaya Kec. Pd Aren, Kota Tangerang Selatan, Banten
          </small>
        </a>

        <div class="d-flex d-lg-none justify-content-around w-100 mt-3">
          <a
            href="/"
            class="text-center text-decoration-none flex-fill text-primary fw-bold"
          >
            <i class="bi bi-person-plus-fill" style="font-size: 20px"></i><br />
            <small>Daftar Antrian</small>
          </a>
          <a
            href="/search"
            class="text-center text-decoration-none flex-fill text-dark"
          >
            <i class="bi bi-search" style="font-size: 20px"></i><br />
            <small>Cek Antrian</small>
          </a>
          <a
            href="/bukti-transfer"
            class="text-center text-decoration-none flex-fill text-dark"
          >
            <i class="bi bi-receipt me-1"></i><br />
            <small>Bukti Transfer</small>
          </a>
        </div>

        <div class="d-none d-lg-flex ms-auto align-items-center gap-3">
          <a class="nav-link active fw-bold text-primary" href="/">
            <i class="bi bi-person-plus-fill me-1"></i> Daftar Antrian
          </a>
          <a class="nav-link text-dark" href="/search">
            <i class="bi bi-search me-1"></i> Cek Antrian
          </a>
          <a class="nav-link text-dark" href="/bukti-transfer">
            <i class="bi bi-receipt me-1"></i> Bukti Transfer
          </a>
        </div>
      </div>
    </nav>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      .nav-link {
        transition: color 0.2s ease-in-out;
      }
      .nav-link:hover {
        color: #0d6efd !important;
      }
      .navbar-brand:hover {
        opacity: 0.9;
      }
      .navbar {
        transition: background-color 0.3s ease-in-out;
      }
    </style>

    <div
      class="container min-vh-100 d-flex flex-column justify-content-center py-4"
      style="margin-top: 100px"
    >
      <div class="row justify-content-center">
        <div class="col-md-6">
          <h1 class="text-center mb-3 h4 font-weight-bold">
            Daftar Antrian <br />
          </h1>
          <h2 class="text-center mb-3 h4 font-weight-bold">
            Butik Emas LM ANTAM - Bintaro
          </h2>
          <br />
          <div class="card shadow-sm">
            <div class="card-body p-4">
              <form action="https://www.antributikbintaro.com" method="POST">
                <input
                  type="hidden"
                  name="_token"
                  value="iPVOcfr5XCz7usoAjjweh6VGC1Oqy3j0PhZbcL7H"
                />
                <div class="form-group mb-3">
                  <label for="name" class="form-label">Nama KTP</label>
                  <input
                    id="name"
                    name="name"
                    type="text"
                    value=""
                    required
                    class="form-control"
                    oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, '')"
                  />
                </div>

                <div class="mb-3">
                  <label for="ktp" class="form-label"
                    >Nomor KTP (16 digit)</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="ktp"
                    name="ktp"
                    value=""
                    inputmode="numeric"
                    maxlength="16"
                    minlength="16"
                    required
                    oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,16)"
                  />
                </div>

                <div class="mb-3">
                  <label for="phone_number" class="form-label">Nomor HP</label>
                  <input
                    type="text"
                    class="form-control"
                    id="phone_number"
                    name="phone_number"
                    value=""
                    inputmode="numeric"
                    pattern="[0-9]*"
                    maxlength="12"
                    required
                    oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                  />
                </div>
                <div class="mb-3 form-check">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    id="check"
                    name="check"
                    value="1"
                  />
                  <label class="form-check-label" for="check">
                    <p>
                      <strong>WAJIB </strong>menunjukkan KTP fisik asli yang
                      sesuai data pendaftaran dan jika KTP tidak sesuai atau
                      tidak membawa KTP fisik maka transaksi antrian BATAL
                    </p>
                    <p>&nbsp;</p>
                    <p>
                      <strong
                        >Dan jika nomor antrian sudah terlewat maka akan
                        menggunakan nomor antrian baru.</strong
                      >
                    </p>
                  </label>
                  <div id="error-check" class="text-danger mt-1 d-none">
                    Klik kotak
                  </div>
                </div>

                <div class="mb-3 form-check">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    id="check_2"
                    name="check_2"
                    value="1"
                  />
                  <label class="form-check-label" for="check_2">
                    <p>
                      <strong
                        >Transaksi pembelian per pelanggan maksimal sebulan
                        2X</strong
                      >
                    </p>
                    <p>&nbsp;</p>
                    <p>
                      <strong
                        >Kode/nomor antrian yang diperoleh tidak memastikan
                        Ketersediaan Stok Masih Tersedia, karena Stok
                        Berjalan.</strong
                      >
                    </p>
                  </label>
                  <div id="error-check2" class="text-danger mt-1 d-none">
                    Klik kotak
                  </div>
                </div>
                <div class="form-group mb-3">
                  <label for="captcha_input" class="form-label"
                    >Masukkan teks berikut:</label
                  >
                  <div class="d-flex align-items-center">
                    <div
                      id="captcha-box"
                      class="px-3 py-2 bg-light border me-2"
                      style="letter-spacing: 5px; font-weight: bold"
                    >
                      24IPNlUs
                    </div>
                    <button
                      type="button"
                      class="btn btn-outline-secondary btn-sm me-2"
                      onclick="reloadCaptcha()"
                    >
                      <i class="fas fa-sync-alt"></i>
                    </button>
                    <input
                      id="captcha_input"
                      name="captcha_input"
                      type="text"
                      required
                      class="form-control"
                      style="max-width: 150px"
                    />
                  </div>
                </div>

                <div class="form-group">
                  <button
                    type="submit"
                    class="btn btn-primary w-100"
                    style="background-color: #379777; border-color: #379777"
                  >
                    Daftar
                  </button>
                </div>
              </form>
              <br />
            </div>
          </div>
        </div>
      </div>
    </div>

    <section id="footer" class="bg-white">
      <div class="container py-5">
        <footer>
          <div class="row"></div>
        </footer>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  </body>
</html>
